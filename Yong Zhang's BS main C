#include "stdio.h"
#define M 6	 // No. of numbers in array

// Necessary function to enable printf() using semihosting
extern void initialise_monitor_handles(void);
// Functions to be written
extern int bubble_sort(int* arg1, int arg2);

void BS_in_C(int array[], int num_elem) {
  for (int num_iter = 0; num_iter < num_elem - 1; num_iter++) {
    for (int i = 0; i < num_elem - num_iter - 1; i++) {
      if (array[i] > array[i + 1]) {
        int anything = array[i];
        array[i] = array[i + 1];
        array[i + 1] = anything;
      }
    }
  }
  printf("Using C, the array will be sorted in ascending order as:\n{ ");
  for (int i = 0; i < num_elem; ++i) {
     printf("%d ", array[i]);
   }
  printf("}\n");
}

int main(void)
{
	// Necessary function to enable printf() using semihosting
	initialise_monitor_handles();
	int arr[M] = {18, 34, 32, 75, 11, 97};
	int swap,i;  // no. of total swaps

	// Bubble sort with bubble_sort.s
	swap = bubble_sort((int*)arr, (int)M);
	printf("After %d rounds of swap, the array is sorted as: \n{ ", swap);
	for (i=0; i<M; i++)
	{
		printf("%d ", arr[i]);
	}
	printf("}\n");

	//Starting point of BS_in_C
	int array[] = {18, 34, 32, 75, 11, 97, 1, 3, 2, 5};
	int num_elem = sizeof(array) / sizeof(array[0]);
	BS_in_C(array, num_elem);
	// Infinite loop
	while(1){}
}
